{#unused#}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Order Confirmation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<!-- Container for email content -->
    <div class="container mt-3" id="email_send_id">
        <h1>Order Confirmation</h1>
    <!-- Thank you message with customer's name and order number -->
        <p>Thank you for your purchase, <strong>{{ latest_order.first_name }} {{ latest_order.last_name }}</strong>!</p>
        <p>Your order number is: <strong>{{ latest_order.order_id }}</strong></p>
        <hr>
        <!-- customer information -->
        <h2>Order Summary</h2>
        <div>
             <!-- Display customer information -->
            <p><strong>Name:</strong> {{ latest_order.first_name }} {{ latest_order.last_name }}</p>
            <p><strong>Shipping Address:</strong> {{ latest_order.address }}, {{ latest_order.city }},
                {{ latest_order.state }}, {{ latest_order.zipcode }}</p>
            <p><strong>Payment Amount:</strong> ${{ latest_order.order_total|round(2) }}</p>
        </div>

        <hr>
        <!-- Product details section -->
        <h3>Product Details</h3>
        <!-- Table to display product details -->
        <div class="table-responsive">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Item Name</th>
                        <th>Size</th>
                        <th>Color</th>
                        <th>Unit Price</th>
                        <th>Quantity</th>
                        <th>Subtotal</th>
                    </tr>
                </thead>
                <tbody>
                <!-- Loop through order items and display details -->
                    {% for item in order_items %}
                        <tr>
                            <td>{{ item.item_name }}</td>
                            <td>{{ item.product_size }}</td>
                            <td>{{ item.product_color }}</td>
                            <td>${{ '{:.2f}'.format(item.item_price) }}</td>
                            <td>{{ item.product_qty }}</td>
                            <td>${{'{:.2f}'.format( item.line_price) }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
<!-- JavaScript for form submission -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Get the form element
            var form = document.getElementById("emailForm");
            // Add event listener for form submission
            form.addEventListener("submit", function (event) {
                event.preventDefault(); // Prevent default form submission
                // Set the HTML content value to be sent
                document.getElementById("html-content").value = document.querySelector("#email_send_id").outerHTML;
                // Create FormData object to send form data
                var formData = new FormData(form);
                // Send form data to server for email confirmation
                fetch("/send_confirmation", {
                    method: "POST",
                    body: formData,
                })
                .then(response => response.text()) // Parse response as text
                .then(text => alert(text))  // Show alert with response text
                .catch(error => console.error("Error:", error));// Log any errors
            });
        });
    </script>
<!-- Bootstrap Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
